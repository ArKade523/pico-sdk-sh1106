#include "pico/stdlib.h"
#include "hardware/i2c.h"
#include "sh1106.h"

#define WIDTH 128
#define HEIGHT 64

int main() {
    stdio_init_all();

    // Initialize I2C using pins GP8 & GP9 (default I2C0 pins)
    uint8_t i2c_address = 0x3C; // SH1106 I2C address
    uint sda_pin = 8;
    uint scl_pin = 9;

    // Initialize SH1106 OLED display
    SH1106 display(WIDTH, HEIGHT, i2c0, i2c_address, sda_pin, scl_pin);

    // // Raspberry Pi logo as 32x32 bytearray
    // uint8_t buffer[] = {
    //     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7C, 0x3F, 0x00,
    //     0x01, 0x86, 0x40, 0x80, 0x01, 0x01, 0x80, 0x80, 0x01, 0x11, 0x88, 0x80, 0x01, 0x05, 0xA0, 0x80,
    //     0x00, 0x83, 0xC1, 0x00, 0x00, 0x43, 0xE3, 0x00, 0x00, 0x7E, 0xFC, 0x00, 0x00, 0x4C, 0x27, 0x00,
    //     0x00, 0x9C, 0x11, 0x00, 0x00, 0xBF, 0xFD, 0x00, 0x00, 0xE1, 0x87, 0x00, 0x01, 0xC1, 0x83, 0x80,
    //     0x02, 0x41, 0x82, 0x40, 0x02, 0x41, 0x82, 0x40, 0x02, 0xC1, 0xC2, 0x40, 0x02, 0xF6, 0x3E, 0xC0,
    //     0x01, 0xFC, 0x3D, 0x80, 0x01, 0x18, 0x18, 0x80, 0x01, 0x88, 0x10, 0x80, 0x00, 0x8C, 0x21, 0x00,
    //     0x00, 0x87, 0xF1, 0x00, 0x00, 0x7F, 0xF6, 0x00, 0x00, 0x38, 0x1C, 0x00, 0x00, 0x0C, 0x20, 0x00,
    //     0x00, 0x03, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    // };

    // // Load the Raspberry Pi logo into the framebuffer (the image is 32x32)
    // FrameBuffer fb(buffer, 32, 32, FrameBuffer::Format::MONO_HLSB);

    // Clear the OLED display
    display.fill(0);

    // // Blit the image from the framebuffer to the OLED display
    // display.blit(fb, 96, 0);

    // Add some text
    display.text("Raspberry Pi", 5, 5);
    display.text("Pico", 5, 15);
    display.text("Working with", 5, 25);
    display.text("C++", 5, 35);

    // Update the OLED display
    display.show();

    return 0;
}
